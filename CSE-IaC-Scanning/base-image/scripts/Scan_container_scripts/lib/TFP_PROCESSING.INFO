#TFP_PROCESS-START
#---- AZURE------------
    #----------PD------------
 cat S06072_1603_azure.json | jq -Mr '.configuration.provider_config|keys|sort| .[0] | select( . == "azurerm" )'
    #----------PV------------
 cat S06072_1603_azure.json.json | jq  '[.planned_values?|select( . != null)|.root_module?.child_modules[].resources[]?]|.[]|[ { "service_reource":.type,"service_name":.name, "properties_already_set":.values, "tags_already_set":.values.tags}]'
    #---------RC------------
 cat S06072_1603_azure.json | jq  '[.resource_changes?|.[]|{ "service_reource":.type,"service_name":.name, "ops_to_be_performed":.change.actions, "properties_to_be_set":.change.after, "tags_to_be_set": .change.after.tags}]'
 cat S06072_1603_azure.json | jq  '[.resource_changes?|.[]|{ "service_reource":.type,"service_name":.name, "ops_already_performed":.change.actions, "properties_already_set":.change.before, "tags_already_set": .change.before.tags}]'
    #---------PS------------
 cat S06072_1603_azure.json | jq  '.prior_state?|.values?|select( . != null)|.root_module.child_modules[]?|[.resources[]]|[.[]|{ "service_reource":.type,"service_name":.name,  "properties_to_be_set":.values, "tags_to_be_set": .values.tags}]|sort|unique'
    #---------PC------------
 cat S06072_1603_azure.json | jq '.configuration.provider_config|{ "keys": keys|sort| select(.), "values": values }| {"service_resources": .values[.keys[]]}|select( .service_resources.name == "azurerm" )'  | sed 's/^\}/\}\,/' | tr '\n' ' ' | sed 's/ //g' | sed 's/\}\,$/\}\n/' | sed 's/^/\[/' | sed 's/$/\]/'  | sed "s/{\"service_resources\"/\n{\"service_resources\"/g"   | jq '.'
 cat S06072_1603_azure.json | jq '.configuration.provider_config|{ "keys": keys|sort| select(.), "values": values }| {"service_resources": .values[.keys[]]}|select( .service_resources.name != "azurerm" )'  | sed 's/^\}/\}\,/' | tr '\n' ' ' | sed 's/ //g' | sed 's/\}\,$/\}\n/' | sed 's/^/\[/' | sed 's/$/\]/'  | sed "s/{\"service_resources\"/\n{\"service_resources\"/g"   | jq '.'
    #---------RD------------
 cat S06072_1603_azure.json | jq '.resource_drift|select( . != null)|{ "keys": keys|sort| select(.), "values": values }| {"service_resources": .values[.keys[]]}|select( .service_resources.name != "azurerm" )' | sed 's/^\}/\}\,/' | tr '\n' ' ' | sed 's/ //g' | sed 's/\}\,$/\}\n/' | sed 's/^/\[/' | sed 's/$/\]/'  | sed "s/{\"service_resources\"/\n{\"service_resources\"/g"   | jq '.|{ "total_resources_deployes":length,"resource_list":.}'
    #---------Rk------------
 cat S06072_1603_azure.json | jq '.|.checks|select( . != null)| values| sort|[ .[]|{ "tf_deployment_type":.address.kind,"tf_deployment_keys":.address|keys, "tf_deployment_resource_type": .address|values,"tf_status":.status  ,"tf_instances_of_type_deployed":.instances}]'

#---- GCP--------
    #----------PD------------
 cat S05360_34_gcp.json | jq -Mr '.configuration.provider_config|keys|sort| .[0] | select( . == "google" )'
    #----------PV------------
 cat S05360_34_gcp.json | jq  '[.planned_values?|select( . != null)|.root_module?.child_modules[].resources[]?]|.[]|[ { "service_reource":.type,"service_name":.name, "properties_already_set":.values, "tags_already_set":.values.labels}]'
    #---------RC------------
 cat S05360_34_gcp.json | jq  '[.resource_changes?|.[]|{ "service_reource":.type,"service_name":.name, "ops_to_be_performed":.change.actions, "properties_to_be_set":.change.after, "tags_to_be_set": .change.after.values}]'
 cat S05360_34_gcp.json | jq  '[.resource_changes?|.[]|{ "service_reource":.type,"service_name":.name, "ops_already_performed":.change.actions, "properties_already_set":.change.before, "tags_already_set": .change.before.labels}]'
    #---------PS------------
 cat S05360_34_gcp.json | jq  '.prior_state?|.values?|select( . != null)|.root_module.child_modules[]?|[.resources[]]|[.[]|{ "service_reource":.type,"service_name":.name,  "properties_to_be_set":.values, "tags_to_be_set": .values.labels}]|sort|unique'
    #---------PC------------
 cat S05360_34_gcp.json | jq '.configuration.provider_config|{ "keys": keys|sort| select(.), "values": values }| {"service_resources": .values[.keys[]]}|select( .service_resources.name == "google" )'  | sed 's/^\}/\}\,/' | tr '\n' ' ' | sed 's/ //g' | sed 's/\}\,$/\}\n/' | sed 's/^/\[/' | sed 's/$/\]/'  | sed "s/{\"service_resources\"/\n{\"service_resources\"/g"   | jq '.'
 cat S05360_34_gcp.json | jq '.configuration.provider_config|{ "keys": keys|sort| select(.), "values": values }| {"service_resources": .values[.keys[]]}|select( .service_resources.name != "google" )'  | sed 's/^\}/\}\,/' | tr '\n' ' ' | sed 's/ //g' | sed 's/\}\,$/\}\n/' | sed 's/^/\[/' | sed 's/$/\]/'  | sed "s/{\"service_resources\"/\n{\"service_resources\"/g"   | jq '.'
    #---------RD------------
 cat S05360_34_gcp.json | jq '.resource_drift|select( . != null)|{ "keys": keys|sort| select(.), "values": values }| {"service_resources": .values[.keys[]]}|select( .service_resources.name != "azurerm" )' | sed 's/^\}/\}\,/' | tr '\n' ' ' | sed 's/ //g' | sed 's/\}\,$/\}\n/' | sed 's/^/\[/' | sed 's/$/\]/'  | sed "s/{\"service_resources\"/\n{\"service_resources\"/g"   | jq '.|{ "total_resources_deployes":length,"resource_list":.}'
    #---------Rk------------
 cat S05360_34_gcp.json | jq '.|.checks|select( . != null)| values| sort|[ .[]|{ "tf_deployment_type":.address.kind,"tf_deployment_keys":.address|keys, "tf_deployment_resource_type": .address|values,"tf_status":.status  ,"tf_instances_of_type_deployed":.instances}]'
#TFP_PROCESS-END

